(this["webpackJsonpuser-ui"]=this["webpackJsonpuser-ui"]||[]).push([[0],{21:function(t,e){t.exports={catalogURL:"http://localhost:8000/",ordersURL:"http://localhost:8100/",usersURL:"http://localhost:8200/",timeoutInterval:1e4}},38:function(t,e,n){},39:function(t,e,n){},40:function(t,e,n){"use strict";n.r(e),function(t){var e=n(4),r=n(21),c=n(42),a=n(43);function o(){return{transactionId:a().replace("-","").substr(0,10)}}t.exports={directURL:function(t,e){return t+e},callGET:function(t,n,a,i){var u=c.createParamsURL(t,n,a,i);return c.fetchWithTimeout(u,{method:"GET",headers:Object(e.a)(Object(e.a)({},o()),{},{Accept:"application/json","Content-Type":"application/json"})},r.timeoutInterval,(function(t){return t}))},callPOST:function(t,n,a,i,u){var s=c.createParamsURL(t,n,a,i);return c.fetchWithTimeout(s,{method:"POST",headers:Object(e.a)(Object(e.a)({},o()),{},{Accept:"application/json","Content-Type":"application/json"}),body:JSON.stringify(u)},r.timeoutInterval,(function(t){return t}))},callDELETE:function(t,n,a,i){var u=c.createParamsURL(t,n,a,i);return c.fetchWithTimeout(u,{method:"DELETE",headers:Object(e.a)(Object(e.a)({},o()),{},{Accept:"application/json","Content-Type":"application/json"})},r.timeoutInterval,(function(t){return t}))},uploadFile:function(t,e,n,r,c){var a=new FormData;a.append("file",n);var i={method:"POST",body:a,headers:o()};return r?fetch(t+e,i).then((function(t){return t.text()})).then((function(t){return r(t,c)})):fetch(t+e,i).then((function(t){return t.text()}))}}}.call(this,n(41)(t))},42:function(t,e){t.exports={createParamsURL:function(t,e,n,r){var c=t,a=e;if(n&&Object.keys(n).forEach((function(t){a=a.replace("{"+t+"}",n[t])})),c+=a,r){var o="?";Object.keys(r).forEach((function(t){o.length>1&&(o+="&"),o+=t+"="+r[t]})),c+=o}return c},fetchWithTimeout:function(t,e,n,r){var c=new Promise((function(t){setTimeout(t,n,{timeout:!0})}));return Promise.race([fetch(t,e),c]).then((function(t){if(t.timeout)console.log("timeout"),r({code:"failure"});else{if(200===t.status)return r(t.json());console.log("failure"),r({code:"failure"})}}),(function(t){r({code:"failure"})}))}}},44:function(t,e){},45:function(t,e,n){},46:function(t,e,n){},47:function(t,e,n){},53:function(t,e,n){},54:function(t,e,n){},55:function(t,e,n){},56:function(t,e,n){},57:function(t,e,n){},58:function(t,e,n){},59:function(t,e,n){"use strict";n.r(e);var r=n(0),c=n.n(r),a=n(14),o=n.n(a),i=n(6),u=n(15),s=(n(38),n(23)),l=n(24),d=n(28),f=n(27),j=(n(39),n(40)),O=n(21);function b(){return j.callGET(O.catalogURL,"catalog/categories")}function m(t){return j.callGET(O.catalogURL,"catalog/categories/{categoryId}/items",t)}function E(t,e,n){return j.callPOST(O.ordersURL,"orders",null,null,n)}function h(t,e,n){return j.callPOST(O.ordersURL,"orders/{orderId}/item",t,null,n)}function p(t,e,n){return j.callPOST(O.ordersURL,"orders/{orderId}/item/{orderItemId}",t,null,n)}function v(t){return console.log("getOrderDetails",t),j.callGET(O.ordersURL,"orders/{orderId}",t)}var I={SET_CATEGORIES:"SET_CATEGORIES",SET_CATEGORY_ITEMS:"SET_CATEGORY_ITEMS"},g=function(t){return{type:I.SET_CATEGORIES,payload:t}},R=function(t){return{type:I.SET_CATEGORY_ITEMS,payload:t}},T={SET_CURRENT_ORDER:"SET_CURRENT_ORDER"};function S(t){return{type:T.SET_CURRENT_ORDER,payload:t}}var N={SERVER_CALL_PENDING:"SERVER_CALL_PENDING",SERVER_CALL_FAILED:"SERVER_CALL_FAILED",SERVER_CALL_FINISHED:"SERVER_CALL_FINISHED"};function L(){return{type:N.SERVER_CALL_PENDING}}function _(){return{type:N.SERVER_CALL_FAILED}}function y(){return{type:N.SERVER_CALL_FINISHED}}function x(t,e,n){t&&"failure"!==t.code?(e(y()),e({type:N.SERVER_CALL_FINISHED}),n&&e(n(t))):e(_())}function A(t,e,n,r,c){return function(a){return a(L()),t(n,r).then((function(t){!function(t,e,n,r){t&&"failure"!==t.code?(e(y()),e(n(t)),r&&e(r(t))):e(_())}(t,a,e,c)})).catch((function(){return a(_())}))}}function C(t,e,n,r,c){return function(a){return a(L()),t(e,n,r).then((function(t){x(t,a,c)})).catch((function(){return a(_())}))}}function D(t){return A(v,S,{orderId:t.id},null)}var P=n(3),U=(n(45),n(46),n(47),n(9)),G=function(t){return t.orderNs},F=Object(U.a)([G],(function(t){return t.currentOrder})),V=Object(U.a)([G],(function(t){var e=0;t.currentOrder&&t.currentOrder.orderItems.forEach((function(t){e+=t.quantity}));return e})),w=n.p+"static/media/cart.518371bf.png",k=n(1);var H=Object(U.b)({itemsNumber:V}),M=Object(P.f)(Object(i.b)(H)((function(t){var e=t.itemsNumber;return Object(k.jsxs)("div",{className:"header-cart-component",children:[Object(k.jsx)("img",{src:w}),Object(k.jsx)("div",{className:"items-number",children:e})]})})));function J(){return Object(k.jsxs)("div",{className:"header-component",children:["SHOP NOW",Object(k.jsx)("div",{className:"right",children:Object(k.jsx)(M,{})})]})}function W(t){var e=t.children;return Object(k.jsxs)("div",{className:"common-layout-component",children:[Object(k.jsx)(J,{}),Object(k.jsx)("div",{className:"body",children:e})]})}var q=function(t){return t.catalogNs},Y=Object(U.a)([q],(function(t){return t.categories})),B=Object(U.a)([q],(function(t){return t.categoryItems}));n(53),n(54);var $=Object(i.b)(null,(function(t){return{fetchCategoryItems:function(e){return t(function(t){return A(m,R,{categoryId:t},null)}(e))}}}))((function(t){var e=t.item,n=t.fetchCategoryItems;return Object(k.jsx)("div",{className:"category-preview-item-component",onClick:function(){n(e.id)},children:e.name},e.id)}));var z=Object(U.b)({categories:Y}),K=Object(i.b)(z)((function(t){var e=t.categories;return Object(k.jsx)("div",{className:"categories-preview-component",children:e&&e.map((function(t){return Object(k.jsx)($,{item:t},t.id)}))})}));n(55),n(56);var Q=n(11),X=n(25),Z=n.n(X),tt=n(4),et={categories:[],categoryItems:[]},nt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:et,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case I.SET_CATEGORIES:return Object(tt.a)(Object(tt.a)({},t),{},{categories:e.payload});case I.SET_CATEGORY_ITEMS:return Object(tt.a)(Object(tt.a)({},t),{},{categoryItems:e.payload});default:return t}},rt={UPDATING:"UPDATING",FAILED:"FAILED",NOT_UPDATING:"NOT_UPDATING"},ct={serverStatus:rt.NOT_UPDATING},at=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ct,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case N.SERVER_CALL_FAILED:return Object(tt.a)(Object(tt.a)({},t),{},{serverStatus:rt.FAILED});case N.SERVER_CALL_PENDING:return Object(tt.a)(Object(tt.a)({},t),{},{serverStatus:rt.UPDATING});case N.SERVER_CALL_FINISHED:return Object(tt.a)(Object(tt.a)({},t),{},{serverStatus:rt.NOT_UPDATING});default:return t}},ot={currentOrder:null},it=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ot,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case T.SET_CURRENT_ORDER:return{currentOrder:e.payload};default:return t}},ut=Object(Q.b)({catalogNs:nt,generalNs:at,orderNs:it}),st=n(26),lt=Object(Q.a)(st.a),dt=Z()([]),ft=function(){try{var t=sessionStorage.getItem("state");if(null===t)return;return JSON.parse(t)}catch(e){return}}(),jt=Object(Q.c)(lt,dt),Ot=Object(Q.d)(ut,ft,jt);function bt(t){var e=F(Ot.getState());if(!e)return C(E,null,null,{catalogId:t,quantity:1},D);var n=null;return e.orderItems.forEach((function(e){e.catalogId===t&&(n=e)})),n?(n.quantity++,function(t,e){return C(p,{orderId:t,orderItemId:e.id},null,e,D)}(e.id,n)):(n={catalogId:t,quantity:1},function(t,e){return C(h,{orderId:t},null,e,D)}(e.id,n))}Ot.subscribe((function(){!function(t){try{var e=JSON.stringify(t);sessionStorage.setItem("state",e)}catch(n){}}(Ot.getState())}));var mt=Object(i.b)(null,(function(t,e){return{addItem:function(){return t(bt(e.item.id))}}}))((function(t){var e,n=t.item,r=t.addItem;return Object(k.jsxs)("div",{className:"catalog-item-component",children:[Object(k.jsx)("div",{className:"name",children:n.name}),Object(k.jsx)("div",{className:"image",children:Object(k.jsx)("img",{alt:"",src:n.imageUrl})}),Object(k.jsx)("div",{className:"description",children:n.description}),Object(k.jsx)("div",{className:"price",children:(e=n.price,"$"+e)}),Object(k.jsx)("div",{className:"bottom",onClick:r,children:Object(k.jsx)("div",{className:"add-to-cart",children:"Add to cart"})})]})}));var Et=Object(U.b)({categoryItems:B}),ht=Object(i.b)(Et)((function(t){t.categoryId;var e=t.categoryItems;return Object(k.jsx)("div",{className:"catalog-items-component",children:e&&e.map((function(t){return Object(k.jsx)(mt,{item:t},t.id)}))})}));n(57);function pt(){return Object(k.jsxs)(W,{children:[Object(k.jsx)(K,{}),Object(k.jsx)("hr",{}),Object(k.jsx)(ht,{})]})}n(58);function vt(){return Object(k.jsx)(W,{children:"Shopping Cart"})}var It=function(t){Object(d.a)(n,t);var e=Object(f.a)(n);function n(){return Object(s.a)(this,n),e.apply(this,arguments)}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.props.retrieveCategories()}},{key:"render",value:function(){return Object(k.jsx)("div",{className:"app-component",children:Object(k.jsxs)(P.c,{children:[Object(k.jsx)(P.a,{exact:!0,path:"/",component:pt}),Object(k.jsx)(P.a,{exact:!0,path:"/cart",component:vt})]})})}}]),n}(r.Component),gt=Object(i.b)(null,(function(t){return{retrieveCategories:function(){return t(A(b,g,null,null))}}}))(It),Rt=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,60)).then((function(e){var n=e.getCLS,r=e.getFID,c=e.getFCP,a=e.getLCP,o=e.getTTFB;n(t),r(t),c(t),a(t),o(t)}))};o.a.render(Object(k.jsx)(i.a,{store:Ot,children:Object(k.jsx)(u.a,{children:Object(k.jsx)(c.a.StrictMode,{children:Object(k.jsx)(gt,{})})})}),document.getElementById("root")),Rt()}},[[59,1,2]]]);
//# sourceMappingURL=main.d5a59ef2.chunk.js.map